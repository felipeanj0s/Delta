# ==============================================================================
# Template de Configuração do Zabbix Agent
# Arquivo: roles/zabbix_agent/templates/zabbix_agent2.conf.j2
# Descrição: Este template gera o arquivo de configuração do Zabbix Agent,
#            utilizando variáveis globais para garantir consistência.
# ==============================================================================
# --- Parâmetros Gerais ---
PidFile={{ zabbix_agent_pidfile }}
LogType={{ zabbix_agent_logtype }}
LogFile={{ zabbix_agent_logfile }}
LogFileSize={{ zabbix_agent_logfile_size }}
DebugLevel={{ zabbix_agent_debug_level }}
SourceIP={{ zabbix_agent_source_ip }}
EnableRemoteCommands=0

# --- Checagens Passivas (Desativadas) ---
# Server={{ zabbix_agent_server }}
# ListenPort={{ zabbix_agent_listenport }}
# StartAgents={{ zabbix_agent_start_agents }}

# --- Checagens Ativas ---
ServerActive={{ zabbix_agent_serveractive_list | join(', ') }}
Hostname={{ zabbix_agent_hostname }}
RefreshActiveChecks={{ zabbix_agent_refresh_active_checks }}
BufferSend={{ zabbix_agent_buffer_send }}
BufferSize={{ zabbix_agent_buffer_size }}
EnablePersistentBuffer={{ zabbix_agent_enable_persistent_buffer }}
PersistentBufferPeriod={{ zabbix_agent_persistent_buffer_period }}
# PersistentBufferFile={{ zabbix_agent_persistent_buffer_file }}

# --- Parâmetros Avançados ---
Timeout={{ zabbix_agent_timeout }}
Include={{ zabbix_agent_include_dir }}
ControlSocket={{ zabbix_agent_control_socket }}

# --- Parâmetros de TLS (Ativados) ---
TLSConnect={{ zabbix_agent_tls_connect }}
TLSAccept={{ zabbix_agent_tls_accept }}
TLSPSKIdentity={{ zabbix_agent_psk_identity }}
TLSPSKFile={{ zabbix_agent_psk_file }}

# --- Plugins ---
Plugins.Log.MaxLinesPerSecond={{ zabbix_agent_plugins_log_max_lines }}
Plugins.Docker.Endpoint={{ zabbix_agent_plugins_docker_endpoint }}
Plugins.Docker.Timeout={{ zabbix_agent_plugins_docker_timeout }}