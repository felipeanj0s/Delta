# ==============================================================================
# Template de Configuração de Rede - Debian 12 (Versão Final)
# Arquivo: roles/net_security/templates/interfaces.j2
# ==============================================================================

# Este arquivo descreve as interfaces de rede disponíveis e como ativá-las.
# Para mais informações, veja interfaces(5).

source /etc/network/interfaces.d/*

# A interface de loopback
auto lo
iface lo inet loopback

# A interface de rede primária (IPv4 e IPv6)
auto {{ pop_network_interface }}

# Configuração IPv4
iface {{ pop_network_interface }} inet static
  address {{ pop_network_ipv4_address | ipaddr('address') }}
  netmask {{ pop_network_ipv4_address | ipaddr('netmask') }}
  gateway {{ pop_network_ipv4_gateway }}
  dns-nameservers {{ pop_network_dns_list | join(' ') }}

# Configuração IPv6
iface {{ pop_network_interface }} inet6 static
  address {{ pop_network_ipv6_address | ipaddr('address') }}
  netmask {{ pop_network_ipv6_address | ipaddr('netmask') }}  

# Rotas personalizadas
{% for route in pop_network_routes %}
post-up ip route add {{ route.to }} via {{ route.via }} metric {{ route.metric | default(100) }}
{% endfor %}